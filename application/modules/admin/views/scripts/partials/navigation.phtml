<?php

function genMenu($container)
{
    foreach ($container as $page)
    {
        echo '<li class="dropdown">' . "\n";

        $href = $page->uri;
        $target = 'dropdown-toggle';
        $toggle = !empty($page->pages) ? "dropdown" : "";
        
        echo '<a href="' . $href . '" data-toggle="'.$toggle.'" target="' . $target . '">' . htmlentities($page->label) . '</a>' . "\n";
        
        if (!empty($page->pages))
        {
            echo '<ul class="dropdown-menu">' . "\n";

            genMenu($page->pages);

            echo '</ul>' . "\n";
        }

        echo '</li>' . "\n";
    }
}

echo '<ul class="nav">' . "\n";

genMenu($this->container);

echo '</ul>';

